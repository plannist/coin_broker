<head th:fragment="head" xmlns:th="http://www.thymeleaf.org">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.95, maximum-scale=0.95, shrink-to-fit=no, user-scalable=no" />
    <meta name="description" content="비트코인, 이더리움, 리플 전송대행" />
    <meta name="keywords" content="비트코인,이더리움,리플,암호화폐,가상화폐,구매대행,전송대행,거래대행,대리송금,대리구매,사이트">
    <meta name="author" content="" />
    <title>New Age - Start Bootstrap Theme</title>
    <link rel="icon" type="image/x-icon" href="/image/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Google fonts-->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">

    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
        /*<![CDATA[*/
        var headerName = '[[${_csrf.headerName}]]';
        var token = '[[${_csrf.token}]]';
        /*]]>*/

        $.ajaxPrefilter(function (options) {


            if (options.method === 'POST' || options.method === 'post'|| options.type === 'post' || options.type === 'POST') {
                console.log("csrf 해더 설정 인입: "+headerName);
                options.headers = options.headers || {};
                options.headers[headerName] = token;
                //			options.headers = options.headers || {};
                //			options.headers['Authorization'] = "Bearer "+accessToken;
            }
        });

        //Add a request interceptor
        axios.interceptors.request.use(function (config) {
            $('.loading').show();



            console.log("axios header 설정 인입");
            config.headers.headerName =  token;
            config.headers[headerName] = token;

            return config;
        });
        /*
        2. 응답 인터셉터
        2개의 콜백 함수를 받습니다.
        */
        axios.interceptors.response.use(
            function (response) {
                /*
                    http status가 200인 경우
                    응답 성공 직전 호출됩니다.
                    .then() 으로 이어집니다.
                */
                $('.loading').hide();
                return response;
            },

            function (error) {
                /*
                    http status가 200이 아닌 경우
                    응답 에러 직전 호출됩니다.
                    .catch() 으로 이어집니다.
                */
                $('.loading').hide();
                return Promise.reject(error);
            }
        );


        /*로딩 전역 변수*/
        (function($) {
            $(document).ajaxStart(function(e){
                console.log("AjaxStart");
                $('.loading').show();
            });

            $(document).ajaxStop(function(e){
                console.log("AjaxStop");
                $('.loading').hide();
            });
        }(jQuery));

        /*사용 기기 체크*/
        var uAgent = navigator.userAgent.toLowerCase();
        var isMobile = false;
        // 아래는 모바일 장치들의 모바일 페이지 접속을위한 스크립트
        var mobilePhones = new Array('iphone', 'ipod', 'ipad', 'android', 'blackberry', 'windows ce','nokia', 'webos', 'opera mini', 'sonyericsson', 'opera mobi', 'iemobile', 'mozilla/5.0 applewebkit/535.19 chrome/56.0.0 mobile safari/535.19');
        for (var i = 0; i < mobilePhones.length; i++){
            if (uAgent.indexOf(mobilePhones[i]) != -1){
                console.log("brawzer : ", mobilePhones[i]);
                isMobile = true;
            }
        }

        var isChrome = uAgent.indexOf("chrome") ? true : false;

        /*로그아웃*/
        function logout(){
            const accessToken = Kakao.Auth.getAccessToken();
            console.log("logout >> kakao accessToken :", accessToken);

        }

        function kkoLogout(){

            Kakao.Auth.logout(function(res) {
                if(res){
                    location.href = "/";
                }
            });

        }

        function kkoDisconnect(){
            /*로그인 기록 제거 다시 아이디 입력 및 동의 필요*/
            Kakao.API.request({
                url: '/v1/user/unlink',
                success: function(response) {
                    console.log("kkoLogout success: ", response);
                },
                fail: function(error) {
                    console.log("kkoLogout error: ", error);
                },
            });

        }

    </script>
</head>